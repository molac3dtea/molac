<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>molac | 3D-teaorigami - Molnár László</title>
  <meta name="description" content="Molnár László (molac) hivatalos oldala. 3D-teaorigami alkotások.">

  <link rel="stylesheet" href="bootstrap.css">

  <style>
    body {
      position: relative;
      min-height: 100vh;
      margin: 0;
      font-family: sans-serif;
      overflow: hidden;
      background-color: #f6f6f6;
    }

    /* ===== HÁTTÉR ===== */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url("pictures/background/windmill2plus_.jpg") center/cover no-repeat;
      opacity: 0.15;
      z-index: -3;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(90deg, #f6f6f6 0%, transparent 20%, transparent 80%, #f6f6f6 100%);
      z-index: -2;
    }

    /* ===== WELCOME BOX (Keskenyebb és dinamikus) ===== */
	.welcome-box {
	  text-align: center;
	  background: rgba(255, 255, 255, .95);
	  padding: 1.2rem 1.5rem;
	  border-radius: 2rem; /* Minden sarka kerek */
	  box-shadow: 0 0.5rem 2rem rgba(0,0,0,.15);
	  width: 320px;
	  position: absolute;
	  top: 10px; /* 15 pixel távolság a tetejétől, hogy látsszon a kerekítés */
	  left: 50%;
	  transform: translateX(-50%);
	  z-index: 10;
	  border: 1px solid rgba(0,51,102,0.1);
	}
	
    .welcome-box h1 {
      font-size: 1.8rem;
      font-weight: 800;
      color: #003366;
      margin-bottom: 0.1rem;
    }

    .welcome-box p.instruction {
      color: #555;
      font-size: 0.8rem;
      margin-bottom: 0.5rem;
    }

    /* ===== HENGER KERET ===== */
    .wheel-frame {
      position: relative;
      height: 200px;
      width: 260px;
      margin: 5px auto;
      perspective: 1000px;
      overflow: hidden;
      background: rgba(0, 51, 102, 0.05);
      border-radius: 1rem;
      border: 1px solid rgba(0, 51, 102, 0.15);
      mask-image: linear-gradient(to bottom, transparent, black 48%, black 52%, transparent);
      -webkit-mask-image: linear-gradient(to bottom, transparent, black 45%, black 55%, transparent);
	  touch-action: none;
	  -webkit-tap-highlight-color: transparent;
    }

    .wheel-list {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      margin-top: 80px; 
      transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .lang-item {
      position: absolute;
      left: 0;
      width: 100%;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none !important;
      font-size: 1.3rem;
      font-weight: 700;
      color: #003366;
      backface-visibility: hidden;
      transition: all 0.3s;
      opacity: 0.35;
    }

    /* AKTÍV NYELV: SÖTÉTKÉK */
    .lang-item.active {
      opacity: 1;
      color: #002244; 
      transform: scale(1.15) !important;
      text-shadow: 0 0 2px rgba(255,255,255,0.8);
    }

    /* ===== ORIGAMI HÁTTÉR ===== */
    .background-origami {
      position: absolute;
      inset: 0;
      z-index: -1;
      overflow: hidden;
    }

    .wrapper {
      position: absolute;
      opacity: .55;
      will-change: transform;
    }

    .wrapper img {
      width: 100%;
      display: block;
      animation: spin linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body>

<div class="background-origami"></div>

<div class="welcome-box" id="welcome-box">
  <h1>Üdvözöllek!</h1>
  <p class="instruction">Válassz nyelvet / Select language</p>

  <div class="wheel-frame" id="wheelFrame">
    <div class="wheel-list" id="wheelList"></div>
  </div>
</div>

<script>
const languages = [
  { name: "Magyar", code: "hu" },
  { name: "English", code: "en" },
  { name: "Deutsch", code: "de" },
  { name: "Español", code: "es" },
  { name: "Italiano", code: "it" },
  { name: "Français", code: "fr" },
  { name: "Português", code: "pt" },
  { name: "Nederlands", code: "nl" },
  { name: "Svenska", code: "sv" },
  { name: "Suomi", code: "fi" },
  { name: "Norsk", code: "no" },
  { name: "Dansk", code: "da" },
  { name: "Íslenska", code: "is" },
  { name: "Català", code: "ca" },
  { name: "日本語", code: "ja" },
  { name: "中文", code: "zh" },
  { name: "한국어", code: "ko" },
  { name: "Esperanto", code: "eo" },
  { name: "Lietuvių", code: "lt" },
  { name: "Latviešu", code: "lv" },  
  { name: "Eesti", code: "et" },
  { name: "Türkçe", code: "tr" },
  { name: "Ελληνικά", code: "el" },
  { name: "Shqip", code: "sq" },
  { name: "Български", code: "bg" },
  { name: "Polski", code: "pl" },
  { name: "Čeština", code: "cs" },
  { name: "Slovenčina", code: "sk" },
  { name: "Українська", code: "uk" },
  { name: "Română", code: "ro" },
  { name: "Српски", code: "sr" },
  { name: "Hrvatski", code: "hr" },
  { name: "Slovenščina", code: "sl" },
];

const wheelList = document.getElementById("wheelList");
let currentIndex = 0;
const radius = 130;

function createWheel() {
  languages.forEach((lang, i) => {
    const a = document.createElement("a");
    a.href = `origami.htm?lang=${lang.code}`;
    a.className = "lang-item";
    a.innerText = lang.name;
    wheelList.appendChild(a);
  });
  updateWheel();
}

function updateWheel() {
  const items = document.querySelectorAll(".lang-item");
  items.forEach((item, i) => {
    let diff = i - currentIndex;
    if (diff > languages.length / 2) diff -= languages.length;
    if (diff < -languages.length / 2) diff += languages.length;

    const angle = diff * (360 / languages.length);
    item.style.transform = `rotateX(${-angle}deg) translateZ(${radius}px)`;
    item.classList.toggle('active', Math.abs(diff) < 0.1);
  });
}

function move(dir) {
  currentIndex = (currentIndex + dir + languages.length) % languages.length;
  updateWheel();
}

window.addEventListener("wheel", e => {
  if (e.target.closest('.wheel-frame')) {
    e.preventDefault();
    move(e.deltaY > 0 ? 1 : -1);
  }
}, {passive: false});

window.addEventListener("keydown", e => {
  // ESC -> Magyar
  if (e.key === "Escape") {
    e.preventDefault();
    const huIndex = languages.findIndex(l => l.code === "hu");
    if (huIndex !== -1) {
      currentIndex = huIndex;
      updateWheel();
    }
    return; // ne fusson tovább más billentyű ágra
  }
  if (e.key === "ArrowDown") { e.preventDefault(); move(1); }
  if (e.key === "ArrowUp") { e.preventDefault(); move(-1); }
  if (e.key === "Enter") window.location.href = `origami.htm?lang=${languages[currentIndex].code}`;
});

/* ===== TOUCH / SWIPE (Android) ===== */
const wheelFrame = document.getElementById("wheelFrame");

let touchStartY = null;
let touchLastY = null;
let touchAccum = 0;
const TOUCH_STEP_PX = 22; // ennyi pixel húzás = 1 lépés (ízlés szerint 18–30)

wheelFrame.addEventListener("touchstart", (e) => {
  e.target.getBoundingClientRect(); // iOS Safari gesture lock
  if (e.touches.length !== 1) return;
  touchStartY = e.touches[0].clientY;
  touchLastY = touchStartY;
  touchAccum = 0;
}, { passive: true });

wheelFrame.addEventListener("touchmove", (e) => {
  if (touchStartY === null) return;

  // fontos: különben az oldal “scrollozni” próbál
  e.preventDefault();

  const y = e.touches[0].clientY;
  const dy = y - touchLastY;
  touchLastY = y;

  touchAccum += dy;

  // ha elég nagyot húztunk, léptetünk egyet (vagy többet)
  while (touchAccum <= -TOUCH_STEP_PX) {
    move(1);              // felfelé húzás -> következő
    touchAccum += TOUCH_STEP_PX;
  }
  while (touchAccum >= TOUCH_STEP_PX) {
    move(-1);             // lefelé húzás -> előző
    touchAccum -= TOUCH_STEP_PX;
  }
}, { passive: false });

wheelFrame.addEventListener("touchend", () => {
  touchStartY = null;
  touchLastY = null;
}, { passive: true });

wheelFrame.addEventListener("touchcancel", () => {
  touchStartY = null;
  touchLastY = null;
}, { passive: true });

/* ===== ORIGAMI FLOATERS ===== */
const container = document.querySelector(".background-origami");
const box = document.getElementById("welcome-box");
let floaters = [];
let screenW = window.innerWidth;
let screenH = window.innerHeight;

function createFloaters() {
  container.innerHTML = "";
  floaters = [];
  const boxBottom = box.offsetHeight;

  for (let i = 1; i <= 15; i++) {
    const w = document.createElement("div");
    w.className = "wrapper";
    const img = document.createElement("img");
    img.src = `pictures/background/origami_step_${String(i).padStart(2, "0")}.png`;
    
    const size = 100 + Math.random() * 80;
    w.style.width = size + "px";
    w.appendChild(img);
    container.appendChild(w);

    floaters.push({
      el: w,
      size: size,
      x: Math.random() * (screenW - size),
      y: boxBottom + Math.random() * (screenH - boxBottom - size),
      dx: (Math.random() - 0.5) * 1.5,
      dy: (Math.random() - 0.5) * 1.5
    });
  }
}

function animate() {
  const boxBottom = box.offsetHeight;
  floaters.forEach(f => {
    f.x += f.dx; f.y += f.dy;
    if (f.x < 0 || f.x > screenW - f.size) f.dx *= -1;
    if (f.y < boxBottom || f.y > screenH - f.size) f.dy *= -1;
    f.el.style.left = f.x + "px";
    f.el.style.top = f.y + "px";
  });
  requestAnimationFrame(animate);
}

window.addEventListener("resize", () => {
  screenW = window.innerWidth;
  screenH = window.innerHeight;
  const boxBottom = box.offsetHeight;
  floaters.forEach(f => {
    if (f.x > screenW - f.size) f.x = screenW - f.size;
    if (f.y < boxBottom) f.y = boxBottom;
    if (f.y > screenH - f.size) f.y = screenH - f.size;
  });
});

createWheel();
createFloaters();
animate();
</script>

</body>
</html>