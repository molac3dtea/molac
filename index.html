<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<title>Origami - blur demo</title>
<link rel="stylesheet" href="bootstrap.css">
<style>
  :root { --box-bottom: 0px; }

  body {
    margin:0;
    min-height:100vh;
    font-family: sans-serif;
    overflow: hidden;
    background-color: #f6f6f6;
  }

  /* FŐ háttérkép – mindig teljes magasságban látszik (contain) */
  body::before {
    content: "";
    position: fixed;
    top: var(--box-bottom);
    left: 0;
    right: 0;
    bottom: 0;
    background: url("pictures/background/windmill2.jpg") no-repeat center top;
    background-size: contain;      /* a kép teljes magasságban látszik */
    background-color: #f6f6f6;
    opacity: 0.6;
    z-index: -4; /* legmélyebb */
    pointer-events: none;
  }

  /* BAL és JOBB elmosott sávok (két külön DIV) */
  .bg-blur-left,
  .bg-blur-right {
    position: fixed;
    top: var(--box-bottom);
    bottom: 0;
    width: min(25%, 420px);           /* rugalmas, max 420px */
    overflow: hidden;
    z-index: -3;                      /* a fő kép felett, origami alatt */
    pointer-events: none;
  }

  /* a háttérképből vett "másolat", a blur-t itt adjuk */
  .bg-blur-left {
    left: 0;
    background: url("pictures/background/windmill2.jpg") no-repeat left center;
    background-size: cover;          /* kitölti a sávot */
    transform: scaleX(1.03) scaleY(1.03); /* enyhe skálázás, hogy a blur szélek ne látszódjanak */
    filter: blur(30px);
    -webkit-filter: blur(30px);      /* safari */
    opacity: 0.95;
    will-change: filter, transform;
  }

  .bg-blur-right {
    right: 0;
    background: url("pictures/background/windmill2.jpg") no-repeat right center;
    background-size: cover;
    transform: scaleX(1.03) scaleY(1.03);
    filter: blur(30px);
    -webkit-filter: blur(30px);
    opacity: 0.95;
    will-change: filter, transform;
  }

  /* A réteg, amely fölött mozognak a darabok — origami marad korábban -1 helyett -2 */
  .background-origami {
    position: absolute;
    inset: 0;
    z-index: -2;
    overflow: hidden;
  }

  .wrapper { position:absolute; opacity:0.08; will-change: transform, width; }
  .wrapper img { display:block; width:100%; animation: spin linear infinite; }

  @keyframes spin { from{ transform: rotate(0deg);} to{ transform: rotate(360deg);} }

  .welcome-box{
    text-align:center;
    background: white;
    padding: 3rem;
    border-radius: 1rem;
    box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.1);
    position: relative;
    z-index: 1; /* legfelül */
  }

</style>
</head>
<body>
  <!-- BLUR sávok (két külön elem a body-ban) -->
  <div class="bg-blur-left"></div>
  <div class="bg-blur-right"></div>

  <div class="background-origami"></div>

  <div class="welcome-box" id="welcome-box">
    <h1 class="mb-4">Üdvözlünk az Origami oldalon!</h1>
    <p class="lead mb-4">Válaszd ki a kívánt nyelvet a belépéshez:</p>
    <div class="d-flex justify-content-center gap-3">
      <a href="hu.html" class="btn btn-primary">Belépés (Magyar)</a>
      <a href="en.html" class="btn btn-secondary">Enter (English)</a>
      <a href="de.html" class="btn btn-info">Eintritt (Deutsch)</a>
    </div>
  </div>

  <script>
    /* frissítjük a --box-bottom CSS változót, hogy a background és a blur sávok helyesen kezdődjenek */
    function updateBoxBottom() {
      const box = document.getElementById('welcome-box');
      const bottom = box.offsetTop + box.offsetHeight;
      document.documentElement.style.setProperty('--box-bottom', bottom + 'px');
    }
    updateBoxBottom();
    window.addEventListener('resize', updateBoxBottom);

    /* --- alább a korábbi origami mozgás kódod lehet --- */
    const container = document.querySelector('.background-origami');
    const box = document.getElementById('welcome-box');
    let screenW = window.innerWidth;
    let screenH = window.innerHeight;
    let boxBottom = box.offsetTop + box.offsetHeight;
    const margin = 50;

    const steps = [
      "origami_step_1_1.png","origami_step_1_2.png",
      "origami_step_2_1.png","origami_step_2_2.png",
      "origami_step_3_1.png","origami_step_3_2.png",
      "origami_step_4_1.png","origami_step_4_2.png",
      "origami_step_5_1.png","origami_step_5_2.png",
      "origami_step_6_1.png","origami_step_6_2.png"
    ];

    const floaters = [];

    function randomPos(imgW, imgH) {
      return {
        x: margin + Math.random() * (screenW - imgW - margin*2),
        y: boxBottom + Math.random() * (screenH - boxBottom - imgH - margin)
      };
    }

    steps.forEach(src => {
      const wrapper = document.createElement("div");
      wrapper.className = "wrapper";

      const img = document.createElement("img");
      img.src = "PICTURES/BACKGROUND/" + src;

      const baseSize = 120 + Math.random() * 80;
      wrapper.style.width = baseSize + "px";

      const {x, y} = randomPos(baseSize, baseSize);
      wrapper.style.left = x + "px";
      wrapper.style.top  = y + "px";

      const spinDur = 20 + Math.random()*40;
      img.style.animationDuration = `${spinDur}s`;

      wrapper.appendChild(img);
      container.appendChild(wrapper);

      floaters.push({
        el: wrapper,
        x: x, y: y, size: baseSize,
        dx: (Math.random() - 0.5) * 0.9,
        dy: (Math.random() - 0.5) * 0.9,
        dsize: (Math.random() - 0.5) * 0.12
      });
    });

    function animate() {
      floaters.forEach(f => {
        f.x += f.dx; f.y += f.dy; f.size += f.dsize;
        if (f.size < 100 || f.size > 260) f.dsize *= -1;
        if (f.x < margin || f.x > screenW - f.size - margin) f.dx *= -1;
        if (f.y < boxBottom || f.y > screenH - f.size - margin) f.dy *= -1;
        f.el.style.left = f.x + "px";
        f.el.style.top  = f.y + "px";
        f.el.style.width = f.size + "px";
      });
      requestAnimationFrame(animate);
    }
    animate();

    window.addEventListener('resize', () => {
      screenW = window.innerWidth; screenH = window.innerHeight;
      boxBottom = box.offsetTop + box.offsetHeight;
      floaters.forEach(f => {
        const newSize = 120 + Math.random() * 80;
        const {x, y} = randomPos(newSize, newSize);
        f.size = newSize; f.x = x; f.y = y;
        f.el.style.width = f.size + "px";
        f.el.style.left = f.x + "px";
        f.el.style.top  = f.y + "px";
      });
      updateBoxBottom(); // frissítjük a CSS változót is
    });
  </script>
</body>
</html>
