<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>molac | 3D-teaorigami - Molnár László</title>
  <meta name="description" content="Molnár László (molac) hivatalos oldala. 3D-teaorigami alkotások.">

  <link rel="stylesheet" href="bootstrap.css">

  <style>
    body {
      position: relative;
      min-height: 100vh;
      margin: 0;
      font-family: sans-serif;
      overflow: hidden;
      background-color: #f6f6f6;
    }

    /* ===== HÁTTÉR ===== */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url("pictures/background/windmill2plus_.jpg") center/cover no-repeat;
      opacity: 0.15;
      z-index: -3;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(90deg, #f6f6f6 0%, transparent 20%, transparent 80%, #f6f6f6 100%);
      z-index: -2;
    }

    /* ===== WELCOME BOX (Keskenyebb és dinamikus) ===== */
	.welcome-box {
	  text-align: center;
	  background: rgba(255, 255, 255, .95);
	  padding: 1.2rem 1.5rem;
	  border-radius: 2rem; /* Minden sarka kerek */
	  box-shadow: 0 0.5rem 2rem rgba(0,0,0,.15);
	  width: 320px;
	  position: absolute;
	  top: 10px; /* 15 pixel távolság a tetejétől, hogy látsszon a kerekítés */
	  left: 50%;
	  transform: translateX(-50%);
	  z-index: 10;
	  border: 1px solid rgba(0,51,102,0.1);
	}
	
    .welcome-box h1 {
      font-size: 1.8rem;
      font-weight: 800;
      color: #003366;
      margin-bottom: 0.1rem;
    }

    .welcome-box p.instruction {
      color: #555;
      font-size: 0.8rem;
      margin-bottom: 0.5rem;
    }

    /* ===== HENGER KERET ===== */
    .wheel-frame {
      position: relative;
      height: 200px;
      width: 260px;
      margin: 5px auto;
      perspective: 1000px;
      overflow: hidden;

      /* ===== ULTIMATE "GYŰRT PAPÍR" ALAP ===== */
      background:
        radial-gradient(circle at 28% 18%, rgba(255,255,255,0.70), transparent 58%),
        radial-gradient(circle at 72% 82%, rgba(0,0,0,0.22), transparent 62%),
        linear-gradient(135deg,
          rgba(255,255,255,0.65) 0%,
          rgba(255,255,255,0.18) 30%,
          rgba(0,0,0,0.22) 62%,
          rgba(255,255,255,0.26) 78%,
          rgba(0,0,0,0.18) 100%),
        #e8e4dc;

      border-radius: 1.2rem;
      border: 1px solid rgba(0,0,0,0.28);

      /* domborítás + mélyebb belső árnyék */
      box-shadow:
        inset 0 2px 6px rgba(255,255,255,0.65),
        inset 0 -10px 18px rgba(0,0,0,0.30),
        0 12px 28px rgba(0,0,0,0.22);

      mask-image: linear-gradient(to bottom, transparent, black 48%, black 52%, transparent);
      -webkit-mask-image: linear-gradient(to bottom, transparent, black 45%, black 55%, transparent);

      touch-action: none;
      -webkit-tap-highlight-color: transparent;
    }

/* ===== ULTIMATE PAPER TEXTURE OVERLAY (noise + fibers) ===== */
    .wheel-frame::before,
    .wheel-frame::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background:
        radial-gradient(120% 80% at 25% 20%, rgba(255,255,255,0.55), transparent 55%),
        radial-gradient(120% 80% at 75% 75%, rgba(0,0,0,0.20), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,0.22), rgba(0,0,0,0.18));
      opacity: 0.35;
      mix-blend-mode: overlay;
      pointer-events: none;
      will-change: transform;
      animation: paperDrift 18s ease-in-out infinite;
    }

    /* grain */
    .wheel-frame::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij4KPGZpbHRlciBpZD0ibiI+CiAgPGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuOSIgbnVtT2N0YXZlcz0iNSIgc3RpdGNoVGlsZXM9InN0aXRjaCIvPgogIDxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIKICAgIDAgMCAwIDAgMC4zNQogICAgMCAwIDAgMCAwLjMzCiAgICAwIDAgMCAwIDAuMjgKICAgIDAgMCAwIDAuOTUgMCIvPgo8L2ZpbHRlcj4KPHJlY3Qgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiIGZpbHRlcj0idXJsKCNuKSIvPgo8L3N2Zz4=");
      background-size: 240px 240px;
      background-repeat: repeat;
      background-position: center;
      opacity: 0.42;
      mix-blend-mode: multiply;
      pointer-events: none;
      will-change: transform;
      filter: contrast(155%) brightness(120%);
      transform: rotate(2deg);
      animation: paperSpin 140s linear infinite;
    }

    /* fibers + extra crumple */
    .wheel-frame::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background:
        radial-gradient(120% 80% at 25% 20%, rgba(255,255,255,0.55), transparent 55%),
        radial-gradient(120% 80% at 75% 75%, rgba(0,0,0,0.20), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,0.22), rgba(0,0,0,0.18));
      opacity: 0.35;
      mix-blend-mode: overlay;
      pointer-events: none;
      will-change: transform;
      animation: paperDrift 18s ease-in-out infinite;
    }

    /* keep the 3D wheel above the texture */
    .wheel-frame > * {
      position: relative;
      z-index: 1;
    }

    .wheel-list {
      position: relative;
      z-index: 1;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      margin-top: 80px; 
      transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .lang-item {
      position: absolute;
      left: 0;
      width: 100%;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none !important;
      font-size: 1.3rem;
      font-weight: 700;
      color: #003366;
      backface-visibility: hidden;
      transition: all 0.3s;
      opacity: 0.35;
    }

    /* AKTÍV NYELV: SÖTÉTKÉK */
    .lang-item.active {
      opacity: 1;
      color: #002244;
      transform: scale(1.15) !important;

      /* mikro “papír dombor” árnyék */
      padding: 0.15rem 0.9rem;
      border-radius: 999px;
      background: rgba(255,255,255,0.35);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.65),
        inset 0 -1px 0 rgba(0,0,0,0.10),
        0 2px 8px rgba(0,0,0,0.18);

      text-shadow:
        0 1px 0 rgba(255,255,255,0.65),
        0 0 2px rgba(255,255,255,0.55);
      filter: drop-shadow(0 1px 2px rgba(0,0,0,0.18));
    }

    /* ===== ORIGAMI HÁTTÉR ===== */
    .background-origami {
      position: absolute;
      inset: 0;
      z-index: 0;
      overflow: hidden;
    }

    .wrapper {
      position: absolute;
      opacity: .55;
      will-change: transform;
    }

    .wrapper img {
      width: 100%;
      display: block;
      animation: spin linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0); }
      to { transform: rotate(360deg); }
    }

    /* ===== PAPÍR TEXTÚRA – LASSÚ ÉLŐ MOZGÁS (GPU-barát) ===== */
    @keyframes paperSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes paperDrift {
      0%   { transform: rotate(0deg) translate3d(0,0,0) scale(1); }
      50%  { transform: rotate(0.8deg) translate3d(6px,-4px,0) scale(1.02); }
      100% { transform: rotate(0deg) translate3d(0,0,0) scale(1); }
    }

  
    @media (prefers-reduced-motion: reduce) {
      .wheel-frame::before, .wheel-frame::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background:
        radial-gradient(120% 80% at 25% 20%, rgba(255,255,255,0.55), transparent 55%),
        radial-gradient(120% 80% at 75% 75%, rgba(0,0,0,0.20), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,0.22), rgba(0,0,0,0.18));
      opacity: 0.35;
      mix-blend-mode: overlay;
      pointer-events: none;
      will-change: transform;
      animation: paperDrift 18s ease-in-out infinite;
    }
    }
  
/* === ACTIVE LANGUAGE NARROW BACKPLATE FIX === */
.lang-item.active {
  background: none !important;
  padding: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

.lang-item.active::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 76%;
  max-width: 185px;
  height: 30px;
  border-radius: 999px;
  background: rgba(255,255,255,0.35);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.65),
    inset 0 -1px 0 rgba(0,0,0,0.10),
    0 2px 8px rgba(0,0,0,0.18);
  z-index: -1;
}


/* === ACTIVE BACKPLATE: subtle curved / barrel-like perspective === */
.lang-item.active::before{
  /* keep the existing sizing, but add a tiny 3D hint */
  transform: translate(-50%, -50%) rotateX(24deg) scaleX(1.03);
  transform-origin: center center;
  /* a slightly stronger edge shading to feel curved */
  background:
    radial-gradient(ellipse at center,
      rgba(255,255,255,0.62) 0%,
      rgba(255,255,255,0.32) 45%,
      rgba(0,0,0,0.10) 78%,
      rgba(0,0,0,0.14) 100%);
}

/* specular highlight stripe (very subtle) */
.lang-item.active::after{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width:72%;
  max-width:175px;
  height:10px;
  transform: translate(-50%, -70%) rotateX(14deg) scaleX(1.03);
  border-radius: 999px;
  background: linear-gradient(to bottom,
    rgba(255,255,255,0.55),
    rgba(255,255,255,0.10));
  opacity: .55;
  pointer-events:none;
  z-index: -1;
  filter: blur(0.2px);
}


/* === CURVED BACKPLATE TUNING: taller light area === */
.lang-item.active::before{
  /* slightly taller plate */
  height: 34px;
  /* shift highlight upward inside gradient */
  background:
    radial-gradient(ellipse at center,
      rgba(255,255,255,0.70) 0%,
      rgba(255,255,255,0.45) 55%,
      rgba(0,0,0,0.08) 82%,
      rgba(0,0,0,0.12) 100%);
}

.lang-item.active::after{
  /* move specular highlight a bit lower and taller */
  height: 12px;
  transform: translate(-50%, -65%) rotateX(14deg) scaleX(1.03);
  opacity: .6;
}

</style>
</head>

<body>

<div class="background-origami"></div>

<div class="welcome-box" id="welcome-box">
  <h1>Üdvözöllek!</h1>
  <p class="instruction">Válassz nyelvet / Select language</p>

  <div class="wheel-frame" id="wheelFrame">
    <div class="wheel-list" id="wheelList"></div>
  </div>
</div>

<script>
const languages = [
  { name: "Magyar", code: "hu" },
  { name: "English", code: "en" },
  { name: "Deutsch", code: "de" },
  { name: "Español", code: "es" },
  { name: "Italiano", code: "it" },
  { name: "Français", code: "fr" },
  { name: "Português", code: "pt" },
  { name: "Nederlands", code: "nl" },
  { name: "Svenska", code: "sv" },
  { name: "Suomi", code: "fi" },
  { name: "Norsk", code: "no" },
  { name: "Dansk", code: "da" },
  { name: "Íslenska", code: "is" },
  { name: "Català", code: "ca" },
  { name: "日本語", code: "ja" },
  { name: "中文", code: "zh" },
  { name: "한국어", code: "ko" },
  { name: "Esperanto", code: "eo" },
  { name: "Lietuvių", code: "lt" },
  { name: "Latviešu", code: "lv" },  
  { name: "Eesti", code: "et" },
  { name: "Türkçe", code: "tr" },
  { name: "Ελληνικά", code: "el" },
  { name: "Shqip", code: "sq" },
  { name: "Български", code: "bg" },
  { name: "Polski", code: "pl" },
  { name: "Čeština", code: "cs" },
  { name: "Slovenčina", code: "sk" },
  { name: "Українська", code: "uk" },
  { name: "Română", code: "ro" },
  { name: "Српски", code: "sr" },
  { name: "Hrvatski", code: "hr" },
  { name: "Slovenščina", code: "sl" },
];

const wheelList = document.getElementById("wheelList");
let currentIndex = 0;
const radius = 130;

function createWheel() {
  languages.forEach((lang, i) => {
    const a = document.createElement("a");
    a.href = `origami.htm?lang=${lang.code}`;
    a.className = "lang-item";
    a.innerText = lang.name;
    wheelList.appendChild(a);
  });
  updateWheel();
}

function updateWheel() {
  const items = document.querySelectorAll(".lang-item");
  items.forEach((item, i) => {
    let diff = i - currentIndex;
    if (diff > languages.length / 2) diff -= languages.length;
    if (diff < -languages.length / 2) diff += languages.length;

    const angle = diff * (360 / languages.length);
    item.style.transform = `rotateX(${-angle}deg) translateZ(${radius}px)`;
    item.classList.toggle('active', Math.abs(diff) < 0.1);
  });
}

function move(dir) {
  currentIndex = (currentIndex + dir + languages.length) % languages.length;
  updateWheel();
}

window.addEventListener("wheel", e => {
  if (e.target.closest('.wheel-frame')) {
    e.preventDefault();
    move(e.deltaY > 0 ? 1 : -1);
  }
}, {passive: false});

window.addEventListener("keydown", e => {
  // ESC -> Magyar
  if (e.key === "Escape") {
    e.preventDefault();
    const huIndex = languages.findIndex(l => l.code === "hu");
    if (huIndex !== -1) {
      currentIndex = huIndex;
      updateWheel();
    }
    return; // ne fusson tovább más billentyű ágra
  }
  if (e.key === "ArrowDown") { e.preventDefault(); move(1); }
  if (e.key === "ArrowUp") { e.preventDefault(); move(-1); }
  if (e.key === "Enter") window.location.href = `origami.htm?lang=${languages[currentIndex].code}`;
});

/* ===== TOUCH / SWIPE (Android) ===== */
const wheelFrame = document.getElementById("wheelFrame");

let touchStartY = null;
let touchLastY = null;
let touchAccum = 0;
const TOUCH_STEP_PX = 22; // ennyi pixel húzás = 1 lépés (ízlés szerint 18–30)

wheelFrame.addEventListener("touchstart", (e) => {
  e.target.getBoundingClientRect(); // iOS Safari gesture lock
  if (e.touches.length !== 1) return;
  touchStartY = e.touches[0].clientY;
  touchLastY = touchStartY;
  touchAccum = 0;
}, { passive: true });

wheelFrame.addEventListener("touchmove", (e) => {
  if (touchStartY === null) return;

  // fontos: különben az oldal “scrollozni” próbál
  e.preventDefault();

  const y = e.touches[0].clientY;
  const dy = y - touchLastY;
  touchLastY = y;

  touchAccum += dy;

  // ha elég nagyot húztunk, léptetünk egyet (vagy többet)
  while (touchAccum <= -TOUCH_STEP_PX) {
    move(1);              // felfelé húzás -> következő
    touchAccum += TOUCH_STEP_PX;
  }
  while (touchAccum >= TOUCH_STEP_PX) {
    move(-1);             // lefelé húzás -> előző
    touchAccum -= TOUCH_STEP_PX;
  }
}, { passive: false });

wheelFrame.addEventListener("touchend", () => {
  touchStartY = null;
  touchLastY = null;
}, { passive: true });

wheelFrame.addEventListener("touchcancel", () => {
  touchStartY = null;
  touchLastY = null;
}, { passive: true });

/* ===== ORIGAMI FLOATERS ===== */
const container = document.querySelector(".background-origami");
const box = document.getElementById("welcome-box");
let floaters = [];
let screenW = window.innerWidth;
let screenH = window.innerHeight;

function createFloaters() {
  container.innerHTML = "";
  floaters = [];
  const boxBottom = box.offsetHeight;

  for (let i = 1; i <= 15; i++) {
    const w = document.createElement("div");
    w.className = "wrapper";
    const img = document.createElement("img");
    img.src = `pictures/background/origami_step_${String(i).padStart(2, "0")}.png`;
    
    const size = 100 + Math.random() * 80;
    w.style.width = size + "px";
    w.appendChild(img);
    container.appendChild(w);

    floaters.push({
      el: w,
      size: size,
      x: Math.random() * (screenW - size),
      y: boxBottom + Math.random() * (screenH - boxBottom - size),
      dx: (Math.random() - 0.5) * 1.5,
      dy: (Math.random() - 0.5) * 1.5
    });
  }
}

function animate() {
  const boxBottom = box.offsetHeight;
  floaters.forEach(f => {
    f.x += f.dx; f.y += f.dy;
    if (f.x < 0 || f.x > screenW - f.size) f.dx *= -1;
    if (f.y < boxBottom || f.y > screenH - f.size) f.dy *= -1;
    f.el.style.left = f.x + "px";
    f.el.style.top = f.y + "px";
  });
  requestAnimationFrame(animate);
}

window.addEventListener("resize", () => {
  screenW = window.innerWidth;
  screenH = window.innerHeight;
  const boxBottom = box.offsetHeight;
  floaters.forEach(f => {
    if (f.x > screenW - f.size) f.x = screenW - f.size;
    if (f.y < boxBottom) f.y = boxBottom;
    if (f.y > screenH - f.size) f.y = screenH - f.size;
  });
});

createWheel();
createFloaters();
animate();
</script>

</body>
</html>