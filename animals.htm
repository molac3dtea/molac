<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Origami – Állatok</title>
  <link rel="stylesheet" href="bootstrap.css">
  <style>
    body { position: relative; min-height: 100vh; margin: 0; font-family: sans-serif; background-color: #f6f6f6; overflow-x: hidden; }
    body::before { content: ""; position: fixed; inset: 0; background: linear-gradient(90deg, rgba(246,246,246,0.1) 0%, rgba(246,246,246,0.05) 20%, rgba(246,246,246,0) 40%, rgba(246,246,246,0) 60%, rgba(246,246,246,0.05) 80%, rgba(246,246,246,0.1) 100%), url("pictures/background/windmill2plus_.jpg") no-repeat center center; background-size: cover; filter: blur(15px); opacity: 0.12; z-index: -4; }
    body::after { content: ""; position: fixed; inset: 0; background: url("pictures/background/windmill2plus_.jpg") no-repeat center center; background-size: cover; opacity: 0.12; z-index: -3; mask: linear-gradient(90deg, transparent 0%, black 20%, black 80%, transparent 100%); -webkit-mask: linear-gradient(90deg, transparent 0%, black 20%, black 80%, transparent 100%); }

    .back-button { position: fixed; top: 20px; right: 20px; padding: 5px 12px; background-color: #003366; color: white !important; text-decoration: none; font-size: 0.75rem; font-weight: bold; border-radius: 50px; box-shadow: 0 2px 4px rgba(0,0,0,0.15); z-index: 100; display: flex; align-items: center; transition: all 0.3s ease; }
	.back-button-active { background-color: #0055aa !important; transform: translateX(-10px) scale(1.1); box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
	
	.page-container { max-width: 1100px; margin: 0 auto; padding: 5rem 1rem; }
    table { background: rgba(255, 255, 255, 0.7) !important; backdrop-filter: blur(2px); border-radius: 15px; margin-bottom: 50px !important; width: 100%; border-collapse: separate; border-spacing: 10px; }
    caption { caption-side: top; text-align: center; font-size: 2rem; font-weight: bold; color: #0055aa; padding: 15px; }
    td { padding: 15px; text-align: center; font-weight: bold; border: none !important; font-size: 1.35rem; line-height: 1.4; }
    th { background: #003366; color: white; padding: 15px; border-radius: 8px; text-align: center; font-size: 1.15rem; font-weight: bold; letter-spacing: 1px; font-size: 1.5rem !important; }	
    img { border-radius: 5px; cursor: pointer; transition: transform 0.3s; }
    img:hover { transform: scale(1.01); }

    .lightbox {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.8); z-index: 2000;
      flex-direction: column; justify-content: center; align-items: center;
    }
    .lightbox-header { background-color: #003366; color: #ffff00; padding: 12px 30px; border-radius: 10px; font-size: 2rem; font-weight: bold; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); text-transform: uppercase; letter-spacing: 2px; }
    .lightbox-img-container { position: relative; display: flex; justify-content: center; align-items: center; max-width: 80%; }
    .lightbox img { max-width: 100%; max-height: 70vh; border: 3px solid white; cursor: default; }
    .lightbox-footer { color: white; background: rgba(0, 0, 0, 0.6); padding: 10px 20px; border-radius: 5px; font-size: 1.3rem; margin-top: 15px; }
    
    .nav-arrow { position: absolute; top: 50%; transform: translateY(-50%); color: white; font-size: 3rem; padding: 20px; cursor: pointer; transition: 0.3s; user-select: none; }
    .nav-arrow:hover { color: #0055aa; }
    .prev { left: -60px; }
    .next { right: -60px; }
    .lightbox-close { position: absolute; top: 20px; right: 20px; background-color: #003366; color: white; padding: 8px 18px; border-radius: 50px; font-weight: bold; cursor: pointer; }
	.gallery-img { width: 250px; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); transition: transform 0.3s ease; cursor: pointer; }

	@media (max-width: 768px) {
	  /* Még nagyobb betűk mobilon, ha szükséges */
	  td {
		font-size: 1.3rem !important; 
		padding: 10px 5px !important;
	  }

	  /* Képek méretének igazítása, hogy ne lógjanak ki a szöveg mellől */
	  .gallery-img {
		width: 100% !important; /* Mobilon kitölti a rendelkezésre álló helyet */
		max-width: 250px;       /* De ne legyen óriási */
		height: auto;
	  }
	}

  </style>
</head>
<body>

  <a href="origami.htm" class="back-button">← Vissza</a>

  <div id="lightbox" class="lightbox" onclick="closeImage()">
    <div class="lightbox-close">✕ Bezárás</div>
    <div id="lb-title" class="lightbox-header"></div>
    
    <div class="lightbox-img-container" onclick="event.stopPropagation()">
      <span class="nav-arrow prev" onclick="changeImage(-1, event)">❮</span>
      <img id="lightbox-img" src="">
      <span class="nav-arrow next" onclick="changeImage(1, event)">❯</span>
    </div>

    <div id="lb-desc" class="lightbox-footer"></div>
  </div>

  <div class="page-container">
    <table>
      <caption>Stegosaurus</caption>
      <tr><th colspan="3">Ez a dínó több mint 6 évig készült és 18000 darabból áll</th></tr>
      <tr>
        <td>Ezek a képek<br>2005-ben készültek</td>
        <td><img src="pictures/animals/stego01.jpg" class="gallery-img" onclick="openGallery(0)"></td>
        <td><img src="pictures/animals/stego02.jpg" class="gallery-img" onclick="openGallery(1)"></td>
      </tr>
      <tr>
        <td>Itt még nincs<br>lába a dínónak</td>
        <td><img src="pictures/animals/stego03.jpg" class="gallery-img" onclick="openGallery(2)"></td>
        <td><img src="pictures/animals/stego04.jpg" class="gallery-img" onclick="openGallery(3)"></td>
      </tr>
      <tr>
        <td>Készülnek a lábak</td>
        <td><img src="pictures/animals/stego06.jpg" class="gallery-img" onclick="openGallery(4)"></td>
		<td><img src="pictures/animals/stego07.jpg" class="gallery-img" onclick="openGallery(5)"></td>
      </tr>    
      <tr>
        <td>2010 augusztus<br>elkészült a dínó!<br>Pécsen volt<br>látható először</td>
        <td><img src="pictures/animals/stego09.jpg" class="gallery-img" onclick="openGallery(6)"></td>
		<td><img src="pictures/animals/stego10.jpg" class="gallery-img" onclick="openGallery(7)"></td>
      </tr>    	  
	
	</table>

    <table>
      <caption>Madárpók</caption>
      <tr>
        <td>Terrárium újabb lakója egy<br>25 cm-es madárpók</td>
        <td><img src="pictures/animals/pok.jpg" class="gallery-img" onclick="openGallery(8)"></td>
      </tr>
    </table>
	
    <table>
      <caption>Baromfiudvar lakói</caption>
      <tr>
        <td>A tyúkanyóhoz kb. 1700 db<br>Pickwick tasak kellett</td>
        <td><img src="pictures/animals/tyuk2.jpg" class="gallery-img" onclick="openGallery(9)"></td>
        <td><img src="pictures/animals/tyuk2.jpg" class="gallery-img" onclick="openGallery(10)"></td>
      </tr>
      <tr>
        <td>A csibékhez<br>darabonként 3-400 db</td>
        <td><img src="pictures/animals/csibe.jpg" class="gallery-img" onclick="openGallery(11)"></td>
        <td><img src="pictures/animals/kiskakas.jpg" class="gallery-img" onclick="openGallery(12)"></td>
      </tr>
      <tr>
        <td>Együtt a család</td>
        <td><img src="pictures/animals/bfiudvar.jpg" class="gallery-img" onclick="openGallery(13)"></td>
		<td><img src="pictures/animals/tyuktojas.jpg" class="gallery-img" onclick="openGallery(14)"></td>
      </tr>    
	</table>
	
	<table>
      <caption>Nagy pillangó</caption>
      <tr>
        <td>Közel fél évig készült<br>1800 darabból</td>
        <td><img src="pictures/animals/butterfly.jpg" class="gallery-img" onclick="openGallery(15)"></td>
      </tr>
    </table>

    <table>
      <caption>Kicsi pillangók</caption>
      <tr>
        <td>Ezek a kicsik<br>400 darabból állnak</td>
        <td><img src="pictures/animals/bfly3.jpg" class="gallery-img" onclick="openGallery(16)"></td>
        <td><img src="pictures/animals/bfly1.jpg" class="gallery-img" onclick="openGallery(17)"></td>
		<td><img src="pictures/animals/bfly2.jpg" class="gallery-img" onclick="openGallery(18)"></td>
      </tr>
	</table>	
	
	<table>
      <caption>Terrárium lakói</caption>
      <tr>
        <td>1600 db zöldtea tasakja<br>alkotja ezt a 70 centis<br>bébikrokodilt</td>
        <td><img src="pictures/animals/crokodil.jpg" class="gallery-img" onclick="openGallery(19)"></td>
        <td><img src="pictures/animals/chicken&crokodil.jpg" class="gallery-img" onclick="openGallery(20)"></td>
      </tr>
      <tr>
        <td>Néhány színes újság<br>szétdarabolva<br>2500 kis darabra<br>és kész a dínó<br>(házi-sárkány:)</td>
        <td><img src="pictures/animals/dyno.jpg" class="gallery-img" onclick="openGallery(21)"></td>
        <td><img src="pictures/animals/dyno&crokodil.jpg" class="gallery-img" onclick="openGallery(22)"></td>
      </tr>
      <tr>
        <td>Szintén zöldtea:<br>300 darabos<br>levelibéka</td>
        <td><img src="pictures/animals/frog.jpg" class="gallery-img" onclick="openGallery(23)"></td>
		<td><img src="pictures/animals/terrarium.jpg" class="gallery-img" onclick="openGallery(24)"></td>
      </tr>    
	</table>
	
  </div>

  <script>
    let currentIndex = 0;
    const galleryData = [];

    // Adatok begyűjtése az oldal betöltésekor
    window.onload = function() {
		const imgElements = document.querySelectorAll('.gallery-img');
		imgElements.forEach((img) => {
		  const table = img.closest('table');
		  const caption = table ? table.querySelector('caption').innerText : "";
		  
		  const row = img.closest('tr');
		  let desc = "";
		  
		  if (row) {
			// Megszerezzük az első cella tartalmát HTML-ként
			desc = row.querySelector('td').innerHTML;
			
			// 1. Kicseréljük az összes <br> vagy <br/> taget szóközre
			desc = desc.replace(/<br\s*\/?>/gi, ' ');
			
			// 2. Eltávolítjuk az esetleges egyéb HTML tageket, ha maradtak
			let tempDiv = document.createElement("div");
			tempDiv.innerHTML = desc;
			desc = tempDiv.textContent || tempDiv.innerText || "";
			
			// 3. A tényleges sortöréseket (whitespace) is szóközre cseréljük, 
			// és a dupla szóközöket egyetlen szóközre redukáljuk
			desc = desc.replace(/\s+/g, ' ').trim();
		  }

		  galleryData.push({
			bigSrc: img.src.replace('_', ''),
			title: caption,
			description: desc
		  });
		});
    };

    function openGallery(index) {
      currentIndex = index;
      updateLightbox();
      document.getElementById('lightbox').style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function updateLightbox() {
      const data = galleryData[currentIndex];
      document.getElementById('lightbox-img').src = data.bigSrc;
      document.getElementById('lb-title').innerText = data.title;
      document.getElementById('lb-desc').innerText = data.description;
    }

    function changeImage(step, event) {
      if (event) event.stopPropagation();
      currentIndex = (currentIndex + step + galleryData.length) % galleryData.length;
      updateLightbox();
    }

    function closeImage() {
      document.getElementById('lightbox').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

	window.addEventListener('keydown', function (e) {
	  const lightbox = document.getElementById('lightbox');
	  const backBtn = document.querySelector('.back-button');
	  const isLightboxOpen = lightbox && lightbox.style.display === 'flex';

	  if (e.key === "Escape") {
		// 1. Animáció elindítása
		if (backBtn) {
		  backBtn.classList.add('back-button-active');
		}

		if (isLightboxOpen) {
		  // 2. Ha nyitva van a galéria, csak azt zárjuk be
		  setTimeout(() => {
			if (backBtn) backBtn.classList.remove('back-button-active');
			closeImage();
		  }, 200);
		} else {
		  // 3. Ha NINCS nyitva galéria, akkor visszalépünk a főoldalra
		  setTimeout(() => {
			window.location.href = "origami.htm";
		  }, 200);
		}
	  }
	  
	  // Nyilakkal való léptetés (csak ha nyitva a lightbox)
	  if (isLightboxOpen) {
		if (e.key === "ArrowRight") changeImage(1);
		if (e.key === "ArrowLeft") changeImage(-1);
	  }
	});
	
  </script>
</body>
</html>